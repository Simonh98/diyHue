"use strict";(self.webpackChunkdiyhue=self.webpackChunkdiyhue||[]).push([[81],{1614:function(e,t,o){o.d(t,{Z:function(){return a}});var n=o(6355),l=o(430),r=o.n(l),i=o(184);function a(e){var t=e.type,o=e.message,l=e.duration,a=e.setType;return(0,i.jsx)(r(),{duration:l,persistOnHover:!0,children:(0,i.jsx)("div",{className:"notificationContainer",children:(0,i.jsxs)("div",{className:"notification ".concat(t),children:[(0,i.jsx)("p",{children:o}),(0,i.jsx)("div",{className:"icon",children:(0,i.jsx)(n.aHS,{onClick:function(){return a("none")}})})]})})})}},670:function(e,t,o){o.r(t),o.d(t,{default:function(){return Z}});var n=o(885),l=o(2791),r=o(4569),i=o.n(r),a=o(4942),c=o(6856),s=o(337),u=(o(8988),o(184)),d=function(e){var t=e.light,o=e.lightsCatalog,n=e.setMessage,l=e.setType,r=function(){n("Begin light firmware update"),l("none"),l("success")};return(0,u.jsx)(u.Fragment,{children:["native_single","native_multi"].includes(t.protocol)&&o.lenght>2&&t.protocol_cfg.version===o[t.protocol_cfg.type].version&&(0,u.jsx)("div",{className:"btn blue",children:(0,u.jsx)(c.bH$,{title:"Update available",onClick:function(){(0,s._1)({title:"Update light "+t.name+" firmware?",message:"Are you sure to do this?",buttons:[{label:"Yes",onClick:function(){return r()}},{label:"No"}]})}})})})},h=(o(209),o(9408)),m=o(5326),g=function(e){var t=e.HOST_IP,o=e.api_key,n=e.id,l=e.light,r=e.modelIds,g=e.setType,p=e.setMessage,f=e.lightsCatalog,v=function(){i().delete("".concat(t,"/api/").concat(o,"/lights/").concat(n)).then((function(e){console.log(e.data),p("Light successfully deleted"),g("none"),g("success")})).catch((function(e){console.error(e),p("Error occured, check browser console"),g("none"),g("error")}))},x=r.map((function(e){return{value:e,label:e}}));return(0,u.jsxs)("div",{className:"devicecard light",children:[(0,u.jsxs)("div",{className:"row1",children:[(0,u.jsx)("div",{className:"icon",children:(0,u.jsx)(h.A,{type:"light-"+l.config.archetype,color:"#eeeeee",onClick:function(){i().put("".concat(t,"/api/").concat(o,"/lights/").concat(n,"/state"),{alert:"select"}).then((function(e){console.log(e.data),p("Light alerted"),g("none"),g("success")})).catch((function(e){console.error(e),p("Error occured, check browser console"),g("none"),g("error")}))}})}),(0,u.jsxs)("div",{className:"text",children:[l.name," "]})]}),(0,u.jsxs)("div",{className:"row2",children:[(0,u.jsx)("div",{className:"form-control",children:(0,u.jsx)(m.ZP,{options:x,placeholder:l.modelid,onChange:function(e){return o=e.value,console.log((0,a.Z)({},n,o)),void i().post("".concat(t,"/light-types"),(0,a.Z)({},n,o)).then((function(e){console.log(e.data),p("Modelid updated"),g("none"),g("success")})).catch((function(e){console.error(e),p("Error occured, check browser console"),g("none"),g("error")}));var o},menuPortalTarget:document.body,menuPosition:"fixed"})}),(0,u.jsx)(d,{light:l,lightsCatalog:f,setMessage:p,setType:g})]}),(0,u.jsxs)("div",{className:"row3",children:[(0,u.jsxs)("ul",{children:[(0,u.jsxs)("li",{children:["Protocol: ",l.protocol]}),["native","native_multi","native_single","wled","esphome"].includes(l.protocol)?(0,u.jsxs)("li",{style:{cursor:"pointer"},onClick:function(){return window.open("http://"+l.protocol_cfg.ip,"_blank")},children:["IP: ",l.protocol_cfg.ip]}):(0,u.jsxs)("li",{children:["IP: ",l.protocol_cfg.ip]})]}),(0,u.jsxs)("div",{className:"iconbtn red",children:[(0,u.jsx)(c.FH3,{title:"Delete",onClick:function(){(0,s._1)({title:"Delete light "+l.name,message:"Are you sure to do this?",buttons:[{label:"Yes",onClick:function(){return v()}},{label:"No"}]})}})," "]})]}),l.state.reachable||(0,u.jsx)("div",{className:"label",children:"Offline"})]})},p=o(5987),f=o(1413),v=o(1315),x=["protocol","ip"],j=function(e){var t=e.setType,o=e.setMessage,r=e.HOST_IP,c=e.API_KEY,s=(0,l.useState)({protocol:"auto"}),d=(0,n.Z)(s,2),h=d[0],m=d[1],g=function(e,t){m((0,f.Z)((0,f.Z)({},h),{},(0,a.Z)({},e,t)))};return(0,u.jsx)("div",{className:"contentContainer lights",children:(0,u.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var n={protocol:h.protocol,ip:h.ip,config:(0,p.Z)(h,x)};i().post("".concat(r,"/api/").concat(c,"/lights"),n),o("Light added"),t("none"),t("success")}(e)},className:"add-form",children:[(0,u.jsxs)("div",{className:"form-control",children:[(0,u.jsx)("label",{children:"Protocol:"}),(0,u.jsx)(v.Z,{options:[{value:"auto",label:"Autodetect"},{value:"domoticz",label:"Domoticz"},{value:"flex",label:"Flex"},{value:"jeedom",label:"Jeedom"},{value:"milight",label:"MiLight"},{value:"mibox",label:"Mi Box"},{value:"wiz",label:"Wiz"}],value:h.protocol,onChange:function(e){return g("protocol",e.value)},placeholder:"Choose light protocol"})]}),(0,u.jsxs)("div",{className:"form-control",children:[(0,u.jsx)("label",{children:"Light IP Address:"}),(0,u.jsx)("input",{type:"text",placeholder:"192.168.x.x",value:h.ip,onChange:function(e){return g("ip",e.target.value)}})]}),"auto"!==h.protocol&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"form-control",children:[(0,u.jsx)("label",{children:"Name"}),(0,u.jsx)("input",{type:"text",value:h.lightName,onChange:function(e){return g("lightName",e.target.value)},placeholder:"Name used on diyhue"})]}),(0,u.jsx)("div",{className:"form-control",children:(0,u.jsx)(v.Z,{options:[{value:"LOM001",label:"On/Off Plug"},{value:"LWB010",label:"Dimmable Light"},{value:"LTW001",label:"Color temperature Light"},{value:"LCT015",label:"Color Light"},{value:"LST002",label:"Color Strip"}],value:h.lightModelID,onChange:function(e){return g("lightModelID",e.value)},placeholder:"Emulated light type"})})]}),("milight"===h.protocol||"mibox"===h.protocol)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"form-control",children:[(0,u.jsx)("label",{children:"Device ID"}),(0,u.jsx)("input",{type:"text",value:h.miID,onChange:function(e){return g("miID",e.target.value)},placeholder:"0x1234"})]}),(0,u.jsx)(v.Z,{options:[{value:"rgbw",label:"RGBW"},{value:"cct",label:"CCT"},{value:"rgb_cct",label:"RGB-CCT"},{value:"rgb",label:"RGB"}],value:h.miModes,onChange:function(e){return g("miModes",e.value)},placeholder:"Choose light mode"}),(0,u.jsx)(v.Z,{options:["1","2","3","4"],value:h.miGroups,onChange:function(e){return g("miGroups",e.value)},placeholder:"Choose light group"})]}),"mibox"===h.protocol&&(0,u.jsxs)("div",{className:"form-control",children:[(0,u.jsx)("label",{children:"Port"}),(0,u.jsx)("input",{type:"number",placeholder:"Mi Box port",value:h.miBoxPort,onChange:function(e){return g("miboxPort",e.target.value)}})]}),"domoticz"===h.protocol&&(0,u.jsxs)("div",{className:"form-control",children:[(0,u.jsx)("label",{children:"Device ID"}),(0,u.jsx)("input",{type:"text",placeholder:"",value:h.domoticzID,onChange:function(e){return g("domoticzID",e.target.value)}})]}),"jeedom"===h.protocol&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"form-control",children:[(0,u.jsx)("label",{children:"Light Api"}),(0,u.jsx)("input",{type:"text",placeholder:"Light Api",value:h.jeedomlightAPI,onChange:function(e){return g("jeedomlightAPI",e.target.value)}})]}),(0,u.jsxs)("div",{className:"form-control",children:[(0,u.jsx)("label",{children:"Light ID"}),(0,u.jsx)("input",{type:"text",placeholder:"Light ID",value:h.jeedomlightID,onChange:function(e){return g("jeedomlightID",e.target.value)}})]})]}),(0,u.jsx)("div",{className:"form-control",children:(0,u.jsx)("input",{type:"submit",value:"Add Light",className:"btn btn-block"})})]})})},C=o(1614),b=o(9126),y=["title","titleId"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},L.apply(this,arguments)}function N(e,t){if(null==e)return{};var o,n,l=function(e,t){if(null==e)return{};var o,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(l[o]=e[o]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(l[o]=e[o])}return l}function w(e,t){var o=e.title,n=e.titleId,r=N(e,y);return l.createElement("svg",L({width:"100%",height:"100%",viewBox:"0 0 95 95",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:t,"aria-labelledby":n},r),o?l.createElement("title",{id:n},o):null,l.createElement("g",{transform:"matrix(1,0,0,1,-686.766,-125.442)"},l.createElement("g",{transform:"matrix(0.889669,0,0,1.87268,-86.5674,1707.97)"},l.createElement("g",{transform:"matrix(1.12401,0,0,0.533994,96.9104,-912.044)"},l.createElement("path",{d:"M720.198,165.122L720.197,168.297L721.785,168.297L721.785,166.709C721.785,165.833 721.074,165.122 720.198,165.122ZM725.486,168.297L738.186,168.297C738.186,167.421 737.475,166.709 736.599,166.709L727.074,166.709C726.198,166.709 725.486,167.421 725.486,168.297ZM747.487,160.834C747.877,162.072 748.097,163.383 748.12,164.741C748.122,164.822 748.122,168.216 748.122,168.297L742.949,168.297C742.949,167.421 743.66,166.709 744.536,166.709L746.535,166.709C746.534,165.792 746.534,164.811 746.533,164.768C746.521,164.053 746.447,163.352 746.317,162.672C746.158,161.842 746.678,161.038 747.487,160.834ZM729.683,151.818C729.995,152.593 729.651,153.487 728.885,153.847C728.513,154.022 728.15,154.215 727.799,154.425L727.649,154.516C725.646,155.753 724.023,157.541 722.996,159.668C722.629,160.43 721.732,160.765 720.96,160.445C722.367,156.396 725.603,153.194 729.683,151.818ZM734.365,151.09C738.836,151.153 742.801,153.313 745.312,156.626C744.676,157.168 743.719,157.125 743.135,156.513C742.811,156.174 742.468,155.853 742.107,155.552C740.339,154.075 738.151,153.081 735.747,152.775C734.908,152.668 734.306,151.923 734.365,151.09Z",style:{fill:"white",fillOpacity:.47}}))),l.createElement("g",{transform:"matrix(0.889669,0,0,1.87268,-86.5674,1707.97)"},l.createElement("g",{transform:"matrix(1.27276,0,0,0.604661,358.65,-988.226)"},l.createElement("path",{d:"M443.019,236.773C466.12,236.773 484.874,255.528 484.874,278.628C484.874,301.728 466.12,320.483 443.019,320.483C419.919,320.483 401.164,301.728 401.164,278.628C401.164,255.528 419.919,236.773 443.019,236.773ZM443.019,242.072C463.195,242.072 479.575,258.452 479.575,278.628C479.575,298.804 463.195,315.184 443.019,315.184C422.843,315.184 406.463,298.804 406.463,278.628C406.463,258.452 422.843,242.072 443.019,242.072Z",style:{fill:"white"}}))),l.createElement("g",{transform:"matrix(0.889669,0,0,1.87268,-86.5674,1707.97)"},l.createElement("g",{transform:"matrix(1.75947,0,0,0.835884,-369.691,-962.036)"},l.createElement("path",{d:"M730.158,181.818C730.158,182.14 730.251,182.454 730.427,182.723L731.3,184.036C731.567,184.439 732.174,184.767 732.657,184.767L735.797,184.767C736.277,184.767 736.884,184.439 737.152,184.036L738.022,182.723C738.171,182.496 738.294,182.09 738.294,181.818L738.3,179.813L730.153,179.813L730.158,181.818ZM725.267,167.758L715.152,167.758C714.448,167.758 713.876,167.186 713.876,166.481C713.876,165.777 714.448,165.205 715.152,165.205L753.7,165.205C754.404,165.205 754.976,165.777 754.976,166.481C754.976,167.186 754.404,167.758 753.7,167.758L743.186,167.758C743.135,169.986 742.31,171.97 740.971,173.461C740.129,174.425 738.815,176.439 738.312,178.138C738.311,178.152 738.307,178.165 738.306,178.178L730.148,178.178C730.147,178.165 730.143,178.151 730.142,178.138C729.639,176.439 728.325,174.425 727.483,173.461C726.146,171.929 725.319,169.942 725.267,167.758ZM740.741,167.758C740.691,169.268 740.126,170.749 739.136,171.886C738.338,172.799 737.351,174.254 736.638,175.767L731.82,175.767C731.107,174.254 730.12,172.799 729.323,171.886C728.329,170.749 727.763,169.268 727.713,167.758L740.741,167.758Z",style:{fill:"white"}})))))}var I=l.forwardRef(w);o.p;function Z(e){var t=e.HOST_IP,o=e.API_KEY,r=(0,l.useState)({}),a=(0,n.Z)(r,2),c=a[0],s=a[1],d=(0,l.useState)({}),h=(0,n.Z)(d,2),m=h[0],p=h[1],f=(0,l.useState)([]),v=(0,n.Z)(f,2),x=v[0],y=v[1],L=(0,l.useState)("none"),N=(0,n.Z)(L,2),w=N[0],Z=N[1],k=(0,l.useState)("no message"),M=(0,n.Z)(k,2),P=M[0],O=M[1],_=(0,l.useState)(!1),E=(0,n.Z)(_,2),S=E[0],D=E[1];return(0,l.useEffect)((function(){var e=function(){void 0!==o&&i().get("".concat(t,"/lights")).then((function(e){console.log(e.data),s(e.data)})).catch((function(e){console.error(e)}))};e(),void 0!==o&&i().get("".concat(t,"/light-types")).then((function(e){console.log(e.data),y(e.data.result)})).catch((function(e){console.error(e)})),void 0!==o&&i().get("https://raw.githubusercontent.com/diyhue/Lights/master/catalog.json").then((function(e){console.log(e.data),p(e.data)})).catch((function(e){console.error(e)}));var n=setInterval((function(){e()}),2e3);return function(){return clearInterval(n)}}),[t,o]),(0,u.jsx)("div",{className:"content",children:(0,u.jsx)("div",{className:"inner",children:(0,u.jsxs)("div",{className:"devicecontainer",children:["none"!==w&&(0,u.jsx)(C.Z,{type:w,message:P,duration:"5000",setType:Z}),(0,u.jsxs)("div",{className:"actionBar",children:[(0,u.jsxs)("div",{className:"btn",onClick:function(){return D(!S)},children:[(0,u.jsx)(b.Dwu,{}),(0,u.jsx)("p",{children:"Add light"})]}),(0,u.jsxs)("div",{className:"btn",onClick:function(){void 0!==o&&i().post("".concat(t,"/api/").concat(o,"/lights"),"").then((function(e){console.log(e.data),O("Searching for new lights..."),Z("none"),Z("success")})).catch((function(e){console.error(e),O("Error occured, check browser console"),Z("none"),Z("error")}))},children:[(0,u.jsx)(I,{}),(0,u.jsx)("p",{children:"Scan for lights"})]})]}),S&&(0,u.jsx)(j,{setType:Z,setMessage:O,HOST_IP:t,API_KEY:o}),(0,u.jsx)("div",{className:"cardGrid",children:Object.entries(c).map((function(e){var l=(0,n.Z)(e,2),r=l[0],i=l[1];return(0,u.jsx)(g,{HOST_IP:t,api_key:o,id:r,light:i,modelIds:x,setType:Z,setMessage:O,lightsCatalog:m},r)}))})]})})})}}}]);
//# sourceMappingURL=81.5ada9479.chunk.js.map