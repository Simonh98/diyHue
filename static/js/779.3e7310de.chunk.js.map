{"version":3,"file":"static/js/779.3e7310de.chunk.js","mappings":"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","sources":["containers/Flash.js","containers/Device.js","views/Devices.js"],"sourcesContent":["import { FaTimes } from \"react-icons/fa\";\nimport FlashMessage from \"react-flash-message\";\n\nexport default function Flash({ type, message, duration, setType }) {\n  return (\n    <FlashMessage duration={duration} persistOnHover={true}>\n      <div className=\"notificationContainer\">\n        <div className={`notification ${type}`}>\n          <p>{message}</p>\n          <div className=\"icon\">\n            <FaTimes onClick={() => setType(\"none\")} />\n          </div>\n        </div>\n      </div>\n    </FlashMessage>\n  );\n}\n","import { MdDeleteForever } from \"react-icons/md\";\nimport { FaMagic } from \"react-icons/fa\";\nimport {\n  TiBatteryLow,\n  TiBatteryMid,\n  TiBatteryHigh,\n  TiBatteryFull,\n} from \"react-icons/ti\";\n\nimport axios from \"axios\";\nimport { confirmAlert } from \"react-confirm-alert\"; // Import\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; // Import css\n\nconst Device = ({ HOST_IP, api_key, id, device, setType, setMessage }) => {\n  const deleteAlert = () => {\n    confirmAlert({\n      title: \"Delete device \" + device[\"name\"],\n      message: \"Are you sure to do this?\",\n      buttons: [\n        {\n          label: \"Yes\",\n          onClick: () => deleteDevice(),\n        },\n        {\n          label: \"No\",\n        },\n      ],\n    });\n  };\n\n  const deleteDevice = () => {\n    axios\n      .delete(`${HOST_IP}/api/${api_key}/sensors/${id}`)\n      .then((fetchedData) => {\n        //console.log(fetchedData.data);\n        setMessage(\"Device successfully deleted\");\n        setType(\"none\");\n        setType(\"success\");\n      })\n      .catch((error) => {\n        console.error(error);\n        setMessage(\"Error occured, check browser console\");\n        setType(\"none\");\n        setType(\"error\");\n      });\n  };\n\n  const toggleDevice = (state) => {\n    axios\n      .put(`${HOST_IP}/api/${api_key}/sensors/${id}/config`, { on: state })\n      .then((fetchedData) => {\n        //console.log(fetchedData.data);\n        setMessage(\n          device[\"name\"] + \" successfully \" + (state ? \"enabled\" : \"disabled\")\n        );\n        setType(\"none\");\n        setType(\"success\");\n      })\n      .catch((error) => {\n        console.error(error);\n        setMessage(\"Error occured, check browser console\");\n        setType(\"none\");\n        setType(\"error\");\n      });\n  };\n\n  const batteryLevel = () => {\n    let battery = device[\"config\"][\"battery\"];\n    let battryLevel = battery + \"%\";\n    //console.log(battery);\n    if (battery > 90) {\n      return <TiBatteryFull color=\"#27ae60\" title={battryLevel} />;\n    } else if (battery > 70) {\n      return <TiBatteryHigh  color=\"#1abc9c\" title={battryLevel} />;\n    } else if (battery > 40) {\n      return <TiBatteryMid color=\"#e67e22\" title={battryLevel} />;\n    } else {\n      return <TiBatteryLow color=\"#e74c3c\" title={battryLevel} />;\n    }\n  };\n\n  return (\n    <div className=\"devicecard device\">\n      <div className=\"row1\">\n        <div className=\"icon\">\n          <FaMagic />\n        </div>\n        <div className=\"text\">{device[\"name\"]}</div>\n        <div className=\"switchContainer\">\n          <label className=\"switch\">\n            <input\n              type=\"checkbox\"\n              defaultChecked={device[\"config\"][\"on\"]}\n              onChange={(e) => toggleDevice(e.currentTarget.checked)}\n            />\n            <span className=\"slider\"></span>\n          </label>\n        </div>\n      </div>\n      <div className=\"row2\">\n        <div className=\"text\">\n          ModelID: {device[\"modelid\"]} <br />\n          Type: {device[\"type\"]} <br />\n          Protocol: {device[\"protocol\"]} <br />\n        </div>\n      </div>\n      <div className=\"row3\">\n        <div className=\"battery\">{\"battery\" in device[\"config\"] && batteryLevel()}</div>\n        \n        <div className=\"iconbtn red\">\n          <MdDeleteForever title=\"Delete\" onClick={() => deleteAlert()} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Device;\n","import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Device from \"../containers/Device\";\nimport Flash from \"../containers/Flash\";\n\n\nconst Devices = ({ HOST_IP, API_KEY }) => {\n  const [devices, setDevices] = useState({});\n  const [type, setType] = useState(\"none\");\n  const [message, setMessage] = useState(\"no message\");\n\n  useEffect(() => {\n    const fetchDevices = () => {\n      if (API_KEY !== undefined) {\n        axios\n          .get(`${HOST_IP}/sensors`)\n          .then((fetchedData) => {\n            console.log(fetchedData.data);\n            setDevices(fetchedData.data);\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      }\n    };\n\n    fetchDevices();\n    const interval = setInterval(() => {\n      fetchDevices();\n    }, 2000); // <<-- ⏱ 1000ms = 1s\n    return () => clearInterval(interval);\n  }, [HOST_IP, API_KEY]);\n\n  return (\n    <div className=\"content\">\n      <div className=\"inner\">\n        <div className=\"devicecontainer\">\n            \n      {type !== \"none\" && (\n        <Flash\n          type={type}\n          message={message}\n          duration=\"5000\"\n          setType={setType}\n        />\n      )}\n      <div className=\"cardGrid\">\n          {Object.entries(devices).map(([id, device]) => (\n            device[\"protocol\"] !== \"none\" &&\n            <Device\n              key={id}\n              HOST_IP={HOST_IP}\n              api_key={API_KEY}\n              id={id}\n              device={device}\n              setType={setType}\n              setMessage={setMessage}\n            />\n          ))}\n      </div>\n    </div>\n    </div>\n\n    </div>\n  );\n};\n\nexport default Devices;\n"],"names":["Flash","type","message","duration","setType","persistOnHover","className","onClick","HOST_IP","api_key","id","device","setMessage","deleteDevice","axios","then","fetchedData","catch","error","console","defaultChecked","onChange","e","state","currentTarget","checked","on","battery","battryLevel","color","title","batteryLevel","confirmAlert","buttons","label","API_KEY","useState","devices","setDevices","useEffect","fetchDevices","undefined","log","data","interval","setInterval","clearInterval","Object","entries","map"],"sourceRoot":""}