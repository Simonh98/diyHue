"use strict";(self.webpackChunkdiyhue=self.webpackChunkdiyhue||[]).push([[519],{3240:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var n=a(885),s=a(2791),i=a(4569),c=a.n(i),r=a(2982),o=a(7762),l=a(6355),d=a(9126),u=a(6856),h=a(7948),p=a.n(h);function x(e,t,a){void 0===a&&(a=254);var n=1-e-t,s=(a/254).toFixed(2),i=s/t*e,c=s/t*n,r=1.656492*i-.354851*s-.255038*c,o=.707196*-i+1.655397*s+.036152*c,l=.051713*i-.121364*s+1.01153*c;return r>l&&r>o&&r>1?(o/=r,l/=r,r=1):o>l&&o>r&&o>1?(r/=o,l/=o,o=1):l>r&&l>o&&l>1&&(r/=l,o/=l,l=1),r=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055,o=o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055,l=l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055,r=Math.round(255*r),o=Math.round(255*o),l=Math.round(255*l),isNaN(r)&&(r=0),isNaN(o)&&(o=0),isNaN(l)&&(l=0),"rgba("+Math.floor(r)+","+Math.floor(o)+","+Math.floor(l)+",1)"}function g(e){var t,a,n,s=2e4/e;return s<=66?(t=255,a=99.4708025861*Math.log(s)-161.1195681661,n=s<=19?0:138.5177312231*Math.log(s-10)-305.0447927307):(t=329.698727446*Math.pow(s-60,-.1332047592),a=288.1221695283*Math.pow(s-60,-.0755148492),n=255),t=t>255?255:t,a=a>255?255:a,n=n>255?255:n,"rgba("+Math.floor(t)+","+Math.floor(a)+","+Math.floor(n)+",1)"}function f(e,t,a){var n=.664511*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.154324*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.162028*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92),s=.283881*e+.668433*t+.047685*a,i=88e-6*e+.07231*t+.986039*a,c=(n/(n+s+i)).toFixed(4),r=(s/(n+s+i)).toFixed(4);return isNaN(c)&&(c=0),isNaN(r)&&(r=0),[parseFloat(c),parseFloat(r)]}var m=a.p+"static/media/nightsky.a7e5828708317f7c883d.jpg",v=a(184),j=function(e){var t=e.HOST_IP,a=e.api_key,s=e.groupId,i=e.scenes,r=e.sceneModal,o=e.setSceneModal;function d(){o(!1)}return(0,v.jsxs)(p(),{isOpen:r,onAfterOpen:function(){},onRequestClose:d,contentLabel:"Example Modal",children:[(0,v.jsxs)("div",{className:"header",children:[(0,v.jsx)("div",{className:"headline",children:"Scene Picker"}),(0,v.jsx)("div",{className:"iconbox",children:(0,v.jsx)("button",{onClick:d,children:(0,v.jsx)(l.aHS,{})})})]}),(0,v.jsx)("div",{className:"scenecontainer",children:Object.entries(i).filter((function(e){return e[1].group===s})).map((function(e){var s=(0,n.Z)(e,2),i=s[0],r=s[1];return(0,v.jsxs)("div",{className:"scene",style:{background:"url(".concat(m,")"),backgroundSize:"cover"},onClick:function(){return function(e){c().put("".concat(t,"/api/").concat(a,"/groups/0/action"),{scene:e})}(i)},children:[(0,v.jsxs)("div",{className:"dimmer",children:[Object.entries(r.lightstates).filter((function(e,t){return t<5})).map((function(e){var s,i=(0,n.Z)(e,2),r=i[0],o=i[1];return(0,v.jsx)("div",{className:"color",style:{background:"".concat((s=o,"xy"in s?x(s.xy[0],s.xy[1],254):"ct"in s?g(s.ct):"rgba(200,200,200,1)"))},onClick:function(){return function(e,n){c().put("".concat(t,"/api/").concat(a,"/lights/").concat(e,"/state"),n)}(r,o)}},r)})),(0,v.jsx)("div",{className:"name",children:r.name})]}),(0,v.jsx)("div",{className:"dynamiccontrol",children:(0,v.jsx)("i",{className:"far fa-play-circle"})})]},i)}))})]})},y=a(5863),b=function(e){var t=e.HOST_IP,a=e.api_key,n=e.id,s=e.light,i=function(e){console.log("Apply state "+JSON.stringify(e)),c().put("".concat(t,"/api/").concat(a,"/lights/").concat(n,"/state"),e)};return(0,v.jsxs)("div",{className:"groupCard light",children:[(0,v.jsxs)("div",{className:"row top",children:[(0,v.jsx)("div",{className:"gradient",style:function(){if(s.state.on)return{background:"xy"===s.state.colormode?x(s.state.xy[0],s.state.xy[1],254):"ct"===s.state.colormode?g(s.state.ct):"linear-gradient(90deg, rgba(255,212,93,1))"}}(),children:(0,v.jsx)(l.iih,{})}),(0,v.jsx)("div",{className:"text",children:(0,v.jsxs)("p",{className:"name",children:[s.name," ",s.state.reachable||(0,v.jsx)(y.L8_,{title:"Unrechable"})]})}),(0,v.jsx)("div",{className:"switchContainer",children:(0,v.jsxs)("label",{className:"switch",children:[(0,v.jsx)("input",{type:"checkbox",defaultChecked:s.state.on,onChange:function(e){return i({on:e.currentTarget.checked})}}),(0,v.jsx)("span",{className:"slider"})]})})]}),(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"sliderContainer",children:(0,v.jsx)("input",{type:"range",min:"1",max:"254",defaultValue:s.state.bri,className:"slider",onChange:function(e){return i({bri:parseInt(e.currentTarget.value)})}})})})]})},N=a(3824);function k(e){var t=e.HOST_IP,a=e.api_key,n=e.lights,i=e.groupLights,r=(0,s.useRef)(null),l=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e,s=[],d=(0,o.Z)(i.entries());try{for(d.s();!(e=d.n()).done;){var u=e.value;u=u[1],"xy"in n[u].state&&s.push(x(n[u].state.xy[0],n[u].state.xy[1],254))}}catch(h){d.e(h)}finally{d.f()}r.current&&!l.current&&(l.current=new N.Z.ColorPicker(r.current,{layout:[{component:N.Z.ui.Wheel,options:{}}],colors:s}),l.current.on("input:end",(function(e){var n=e.rgb;c().put("".concat(t,"/api/").concat(a,"/lights/").concat(i[e.index],"/state"),{xy:f(n.r,n.g,n.b)})})))}),[i,n,t,a]),(0,v.jsx)("div",{ref:r})}function w(e){var t=e.HOST_IP,a=e.api_key,n=e.group,i=e.groupId,r=(0,s.useRef)(null),o=(0,s.useRef)(null);return(0,s.useEffect)((function(){r.current&&!o.current&&(o.current=new N.Z.ColorPicker(r.current,{layoutDirection:"horizontal",layout:[{component:N.Z.ui.Slider,options:{sliderType:"kelvin",sliderShape:"circle"}}],color:g(n.action.ct)}),o.current.on("input:end",(function(e){var n=e.kelvin,s=Math.floor((11e3-n)/25.5+153);c().put("".concat(t,"/api/").concat(a,"/groups/").concat(i,"/action"),{ct:s})})))}),[n,i,t,a]),(0,v.jsx)("div",{ref:r})}var _=a(5095),M=a.n(_),P=a(7425),C=a(8329),S=a(4290),H=a(9408),I=function(e){var t=e.HOST_IP,a=e.api_key,i=e.id,h=e.group,p=e.lights,f=e.scenes,m=(0,s.useState)("closed"),y=(0,n.Z)(m,2),N=y[0],_=y[1],I=(0,s.useState)(!1),T=(0,n.Z)(I,2),Z=T[0],E=T[1],O=(0,s.useState)([]),A=(0,n.Z)(O,2),R=A[0],F=A[1],U={opened:{opacity:1},closed:{opacity:0}};!function(){var e,t=(0,o.Z)(h.lights);try{for(t.s();!(e=t.n()).done;){var a=e.value;"xy"in p[a].state&&!R.includes("xy")&&F([].concat((0,r.Z)(R),["xy"])),"ct"in p[a].state&&!R.includes("ct")&&F([].concat((0,r.Z)(R),["ct"]))}}catch(n){t.e(n)}finally{t.f()}}();var z=(0,s.useCallback)(M()((function(e){h.action.bri=e;var n={bri:e};c().put("".concat(t,"/api/").concat(a,"/groups/").concat(i,"/action"),n)}),300),[]);return(0,v.jsxs)("div",{className:"groupCard",children:[(0,v.jsx)(j,{HOST_IP:t,api_key:a,groupId:i,scenes:f,sceneModal:Z,setSceneModal:E}),(0,v.jsxs)("div",{className:"row top",children:[(0,v.jsx)("div",{className:"gradient",style:function(){if(h.state.any_on){var e,t="linear-gradient(45deg, ",a=100/h.lights.length,s=(0,o.Z)(h.lights.entries());try{for(s.s();!(e=s.n()).done;){var i=(0,n.Z)(e.value,2),c=i[0],r=i[1];"xy"===p[r].state.colormode?(1===h.lights.length&&(t+="rgba(200,200,200,1) 0%,"),t=t+x(p[r].state.xy[0],p[r].state.xy[1],254)+" "+Math.floor(a*(c+1))+"%,"):"ct"===p[r].state.colormode?(1===h.lights.length&&(t+="rgba(200,200,200,1) 0%,"),t=t+g(p[r].state.ct)+" "+Math.floor(a*(c+1))+"%,"):(1===h.lights.length&&(t+="rgba(200,200,200,1) 0%,"),t=t+"rgba(255,212,93,1) "+Math.floor(a*(c+1))+"%,")}}catch(l){s.e(l)}finally{s.f()}return{background:t.slice(0,-1)+")"}}}(),children:"Zone"===h.type?(0,v.jsx)(d.D14,{style:{fill:h.state.any_on?"#3a3a3a":"#ddd"}}):(0,v.jsx)(H.A,{type:"room-"+h.class,color:h.state.any_on?"#3a3a3a":"#ddd"})}),(0,v.jsxs)("div",{className:"text",children:[(0,v.jsxs)("p",{className:"name",children:[" ",h.name," "]}),(0,v.jsx)("p",{className:"subtext",children:function(){var e,t=0,a=0,n=(0,o.Z)(h.lights);try{for(n.s();!(e=n.n()).done;){var s=e.value;!0===p[s].state.on?t+=1:a+=1}}catch(i){n.e(i)}finally{n.f()}return 0===t?"All lights off":0===a?"All lights on":t+" lights on"}()})]}),(0,v.jsx)("div",{className:"switchContainer",children:(0,v.jsxs)("label",{className:"switch",children:[(0,v.jsx)("input",{type:"checkbox",defaultValue:h.state.any_on,defaultChecked:h.state.any_on,onChange:function(e){return function(e){var n={on:e};h.state.any_on=e,e||_("closed"),c().put("".concat(t,"/api/").concat(a,"/groups/").concat(i,"/action"),n)}(e.target.checked)}}),(0,v.jsx)("span",{className:"slider",children:" "})]})})]}),(0,v.jsx)("div",{className:"row background",children:(0,v.jsx)(P.M,{initial:!1,children:h.state.any_on&&(0,v.jsx)(C.E.div,{className:"sliderContainer",initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3},children:(0,v.jsx)("input",{type:"range",min:"1",max:"254",defaultValue:h.action.bri,step:"1",className:"slider",onChange:function(e){return z(parseInt(e.target.value))}})})})}),(0,v.jsxs)(S.s,{children:["closed"!==N&&(0,v.jsxs)(C.E.div,{className:"row buttons",initial:"closed",animate:"closed"===N?"closed":"opened",variants:U,children:[(0,v.jsx)(C.E.div,{className:"btn ".concat(R.includes("xy")?"":"disabled"),whileHover:{scale:1.2},whileTap:{scale:.9},variants:U,children:(0,v.jsx)(l.SaA,{onClick:!!R.includes("xy")&&function(){return _("colorPicker")}})}),(0,v.jsx)(C.E.div,{className:"btn ".concat(R.includes("ct")?"":"disabled"),whileHover:{scale:1.2},whileTap:{scale:.9},children:(0,v.jsx)(u.RZ0,{onClick:!!R.includes("ct")&&function(){return _("colorTempPicker")}})}),(0,v.jsx)(C.E.div,{className:"btn",whileHover:{scale:1.2},whileTap:{scale:.9},children:(0,v.jsx)(l.Jh6,{onClick:function(){return E(!0)}})}),(0,v.jsx)(C.E.div,{className:"btn",whileHover:{scale:1.2},whileTap:{scale:.9},children:(0,v.jsx)(l.iih,{onClick:function(){return _("lights")}})})]}),(0,v.jsx)(C.E.div,{className:"row colorpicker",children:(0,v.jsxs)(P.M,{initial:!1,exitBeforeEnter:!0,children:["colorPicker"===N&&(0,v.jsx)(C.E.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,scale:1,height:"auto"},collapsed:{opacity:0,scale:.5,height:0}},transition:{duration:.3},children:(0,v.jsx)(k,{HOST_IP:t,api_key:a,lights:p,groupLights:h.lights})},"content"),"colorTempPicker"===N&&(0,v.jsx)(C.E.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto",scale:1},collapsed:{opacity:0,height:0}},transition:{duration:.3},children:(0,v.jsx)(w,{HOST_IP:t,api_key:a,groupId:i,group:h})},"content"),"lights"===N&&(0,v.jsx)(C.E.div,{className:"lights",initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3},children:h.lights.map((function(e){return(0,v.jsx)(b,{HOST_IP:t,api_key:a,id:e,light:p[e]},e)}))})]})})]}),(0,v.jsx)(P.M,{children:(0,v.jsx)("div",{className:"row bottom",children:(0,v.jsx)(C.E.div,{className:"expandbtn",initial:"collapsed",animate:"closed"===N?"collapsed":"open",whileHover:{scale:1.2},whileTap:{scale:.9},variants:{open:{rotate:180},collapsed:{rotate:0}},transition:{duration:.3},children:(0,v.jsx)(l.RiI,{onClick:function(){"closed"===N?R.includes("xy")?_("colorPicker"):R.includes("ct")?_("colorTempPicker"):_("lights"):_("closed")}})})})})]})},T=a(4373);var Z=function(){return(0,v.jsxs)("div",{className:"roomsetup",children:[(0,v.jsx)("p",{children:"There are no rooms or zones created yet. Use Hue Essentials or Hue app to set up this bridge."}),(0,v.jsxs)("div",{className:"storebutton",children:[(0,v.jsx)("img",{src:"https://is4-ssl.mzstatic.com/image/thumb/Purple122/v4/13/34/4f/13344f80-706e-257c-c72b-e9d698a33bc5/AppIcon-1x_U007emarketing-0-7-0-85-220.png/246x0w.webp",alt:"Hue Essential App"}),(0,v.jsx)("p",{children:"Hue Essentials"}),(0,v.jsx)("a",{href:"https://apps.apple.com/com/app/hue-essentials/id1462943921",children:(0,v.jsx)(l.oPZ,{})}),(0,v.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.superthomaslab.hueessentials",children:(0,v.jsx)(T.VU3,{})})]}),(0,v.jsxs)("div",{className:"storebutton",children:[(0,v.jsx)("img",{src:"https://is3-ssl.mzstatic.com/image/thumb/Purple112/v4/a8/30/a2/a830a22d-e50b-d1d7-0824-457beac55874/AppIcon-1x_U007emarketing-0-7-0-85-220.png/246x0w.webp",alt:"Phillips Hue App"}),(0,v.jsx)("p",{children:"Phillips Hue"}),(0,v.jsx)("a",{href:"https://apps.apple.com/us/app/philips-hue/id1055281310",children:(0,v.jsx)(l.oPZ,{})}),(0,v.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.philips.lighting.hue2",children:(0,v.jsx)(T.VU3,{})})]})]})};function E(e){var t=e.HOST_IP,a=e.API_KEY,i=(0,s.useState)({config:{},lights:{},groups:{},scenes:{}}),r=(0,n.Z)(i,2),o=r[0],l=r[1];return(0,s.useEffect)((function(){var e=function(){void 0!==a&&c().get("".concat(t,"/api/").concat(a)).then((function(e){l(e.data)})).catch((function(e){console.error(e)}))};e();var n=setInterval((function(){e()}),2e3);return function(){return clearInterval(n)}}),[t,a]),(0,v.jsx)("div",{className:"inner",children:(0,v.jsxs)("div",{className:"cardGrid",children:[0===Object.keys(o.groups).length?(0,v.jsx)(Z,{}):(0,v.jsx)(v.Fragment,{}),Object.entries(o.groups).filter((function(e){return"Entertainment"!==e[1].type})).map((function(e){var s=(0,n.Z)(e,2),i=s[0],c=s[1];return(0,v.jsx)(I,{api_key:a,HOST_IP:t,id:i,group:c,lights:o.lights,scenes:o.scenes},i)}))]})})}}}]);
//# sourceMappingURL=519.71a32b72.chunk.js.map